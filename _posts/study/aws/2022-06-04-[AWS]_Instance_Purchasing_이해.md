---
layout: post
title: Instance Purchasing 이해
subtitle: AWS
date: '2022-06-04 6:30:00 +0900'
category: study
tags: aws aws-base
image:
  path: /assets/img/study_AWS/2022-06-04-Instance_Purchasing_이해/logo.png
---

AWS 인스턴스 요금제를 알아보자.

<!--more-->

* this unordered seed list will be replaced by the toc
{:toc}

<br>
<hr/>
<hr/>

## 1. 온디맨드 인스턴스(On-Demand Instance)

### I. 개요

 온디맨드 인스턴스는 **장기 약정이나 선결제 금액은 필요 없다.** <br>
 **초 단위**로 컴퓨팅 용량에 대한 비용을 지불한다.<br>
 **수명 주기를 완전하게 제어할 수 있다.** 즉 시작, 중지, 수면, 사용 시작 또는 종료 시기를 결정할 수 있다.<br>
 애플리케이션 수요에 따라 **컴퓨팅 파워를 늘리거나 줄일 수 있다.**<br>
 인스턴스가 running 상태인 시간(최소 60초)에 대해서만 비용을 지불하면 된다.

<hr>

### II. 온디맨드 인스턴스가 적합한 경우

 **중단할 수 없거나 갑작스럽게 예측할 수 없는 불규칙한** 단기 워크로드가 있는 애플리케이션의 경우 <br>
 **선결제 금액이나 장기약정 없이** 저렴하고 유연하게 EC2를 사용하기를 원하는 경우<br>
 **Amazon EC2에서 처음으로** 개발 또는 시험 중인 애플리케이션

<br>
<hr/>
<hr/>

## 2. 예약 인스턴스(Reserved Instance)

### I. 개요

 일정 기간동안의 사용 요금을 한 번에 결제하는 대신 할인 혜택을 받을 수 있다.<br>
 온디맨드 인스턴스에 비해 **상당한 할인 혜택(최대 75%)**을 제공한다.<br>
 예약 인스턴스는 물리적 인스턴스가 아니며 게정에서 온디맨드 인스턴스를 사용할 때 적용되는 **결제 할인**에 가깝다.<br>
 필요할 때 끄고 켤 수 있는 온디맨드 인스턴스의 특성이 달라지는 것은 아니다. 그러나 요금은 계속 청구되는 듯<br>
 이러한 온디맨드 인스턴스의 경우 결제 할인을 받으려면 **인스턴스 유형 및 지역과 같은 특정 속성에 부합해야 한다.**<br>
 특정 가용역역에 지정하면 용량 예약이 제공되므로 필요할 때 예약한 인스턴스를 시작할 수 있다는 확신을 가질 수 있다.<br>

<br>
<hr>
<br>

### II. 결제 옵션

 예약 인스턴스에 사용할 수 있는 결제 옵션은 다음과 같다.<br>
 할인율은 1년 기준이다.<br>
 3년의 경우 할인율은 거의 배가 된다.

 * **전체 선결제**
    + 기간이 시작되는 시점에서 모든 금액을 결제하고 사용 기간 동안 기타 비용이나 추가 시간당 요금 없이 무제한으로 사용할 수 있음
    + 할인율이 제일 큼(온디맨드 대비 28%)

 * **부분 선결제**
    + 비용 중 일부를 먼저 결제해야 하며, 결제하지 않은 시간에 대해서는 예약 인스턴스가 사용되는지 여부와 상관없이 할인된 시간당 요금이 청구됨
    + 전체 선결제에 비해 약간 낮은 할인율(온디맨드 대비 26%)

 * **부분 선결제**
    + 예약 인스턴스가 사용되는지 여부와 상관없이 사용 기간 동안 매시간마다 할인된 시간당 요금이 청구됨
    + 선결제 금액이 필요하지 않음
        - 선결제가 없는 예약 인스턴스를 사용하려면 결제 기록에 미납액이 없어야 함
    + 할인율이 제일 낮음(온디맨드 대비 25%)

<br>
<hr>
<br>

### III. 예약 인스턴스가 적합한 경우

 **수요가 꾸준한** 애플리케이션의 경우<br>
 **예약 용량이 필요할 수 있는** 애플리케이션의 경우<br>
 총 컴퓨팅 비용을 절감하기 위해 **1년 또는 3년동안 EC2를 사용하기로 약정할 고객**의 경우<br>
 
<br>
<hr/>
<hr/>

## 3. 스팟 인스턴스(Spot Instance)

### I. 개요
 
 온디맨드 가격보다 **저렴한 비용(최대 90% 할인)**으로 **예비** Amazon EC2 컴퓨팅 용량을 사용하는 인스턴스이다.<br>
 할인율이 크기 때문에 EC2 비용을 큰 폭으로 낮출 수 있다.<br>
 스팟 인스턴스의 시간당 가격을 스팟 가격이라고 한다.<br>
 각 가용 영역 내 인스턴스 유형별 스팟 가격은 Amazon EC2에서 설정하며, **스팟 인스턴스의 장기적 공급 및 수요에 따라 점진적으로 조정된다.**<br>
 즉 수요가 늘어 노는 용량이 적어지면 가격은 오르고, 수요가 줄어들어 노는 용량이 늘어나면 가격은 내려간다.
 스팟 인스턴스는 용량이 가용 상태이고 요청에 대한 시간당 최고가가 스팟 가격보다 더 높을 때마다 실행된다.
 
<br>
<hr>
<br>

### II. 스팟 인스턴스가 적합한 경우

 **시작 및 종료 시간이 자유로운 애플리케이션**의 경우<br>
 **컴퓨팅 가격이 매우 저렴해야만 수익이 나는 애플리케이션**의 경우<br>
 대량의 서버 용량 추가로 **긴급히 컴퓨팅 파워가 필요한 사용자**의 경우<br>
 데이터 분석, 배치 작업, 백그라운드 프로세싱 및 선택적 작업에 적합

<br>
<hr>
<br>

### III. 주의 사항

 AWS의 사정에 의해 사용하던 스팟 인스턴스를 뺏길 수 있음

<br>
<hr/>
<hr/>

## 4. 전용 호스트

가상화된 서버에서 EC2를 빌리는 것이 아닌 지정된 물리 서버에서 EC2를 대여한다.<br>
보안적인 이유, 규정에 따른 이유, 퍼포먼스를 위한 이유(CPU Steal) 등으로 인해 사용한다.<br>
온디맨드보다 비싸다.

<br>
<hr/>
<hr/>

## 5. 정리

    가격 순서
      * 스팟 인스턴스 < 예약 인스턴스 < 온디맨드 < 전용 호스트

   * EC2의 가격 모델은 EBS와는 별도이다.
      + EBS는 사용한 만큼 지불
   
   * 기타 데이터 통신 등의 비용은 별도로 청구
      + 참고로 AWS는 바깥으로 나가는 트래픽에 대해서만 요금을

<br>
<hr/>
<hr/>

## Saving Plans

 1년 또는 3년 기간의 일정 사용량약정을 조건으로 EC2 및 Fargate 사용량에 대해 저렴한 요금을 제공하는 유연한 요금 모델이다.

<br>
<hr/>
<hr/>
<br>


* Ref
  - [AWS Amazon Instance Purchasing User Guide](https://docs.aws.amazon.com/ko_kr/ko_kr/AWSEC2/latest/WindowsGuide/instance-purchasing-options.html)
  - [Youtube](https://www.youtube.com/watch?v=0LaVUIkI4h4&list=PLuHgQVnccGMC5AYnBg8ffg5utOLwEj4fZ&index=7&ab_channel=%EC%83%9D%ED%99%9C%EC%BD%94%EB%94%A9)